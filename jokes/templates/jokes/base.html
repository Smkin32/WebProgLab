<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ê–Ω–µ–∫–¥–æ—Ç—ã - –õ—É—á—à–∏–µ —à—É—Ç–∫–∏ –∏ –∞–Ω–µ–∫–¥–æ—Ç—ã{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'jokes/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'jokes/css/components.css' %}">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="{% url 'jokes:home' %}" class="logo">–ê–Ω–µ–∫–¥–æ—Ç—ã 2</a>
                <nav>
                    <ul>
                        <li><a href="{% url 'jokes:home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="{% url 'jokes:list' %}">–í—Å–µ –∞–Ω–µ–∫–¥–æ—Ç—ã</a></li>
                        <li><a href="{% url 'jokes:contact' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                        <li><a href="#" onclick="showRandomJoke()" id="random-joke">–°–ª—É—á–∞–π–Ω—ã–π</a></li>
                        {% if user.is_authenticated %}
                            <li><a href="{% url 'jokes:logout' %}">–í—ã–π—Ç–∏ ({{ user.username }})</a></li>
                        {% else %}
                            <li><a href="{% url 'jokes:login' %}">–í–æ–π—Ç–∏</a></li>
                            <li><a href="{% url 'jokes:register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- WebSocket Connection Status -->
    <div id="connectionStatus" class="connection-status connecting" style="display: none;">
        <span id="connectionText">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
    </div>

    <main>
        <div class="container">
            {% block content %}
            {% endblock %}
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 –õ–∞–±–∞ web-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - –õ—É—á—à–∏–µ —à—É—Ç–∫–∏ –∏ –∞–Ω–µ–∫–¥–æ—Ç—ã</p>
            {% if user.is_staff %}
                <p><a href="/admin/" style="color: #ccc;">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a></p>
            {% endif %}
        </div>
    </footer>

    <!-- Random Joke Modal -->
    <div id="randomJokeModal" class="modal">
        <div class="modal-content">
            <span onclick="closeRandomJoke()" class="modal-close">&times;</span>
            <h2>üé≤ –°–ª—É—á–∞–π–Ω—ã–π –∞–Ω–µ–∫–¥–æ—Ç</h2>
            <div id="randomJokeContent" style="margin: 20px 0; font-size: 1.1rem; line-height: 1.6;"></div>
            <div id="randomJokeCategory" style="margin: 10px 0;"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="showRandomJoke()" class="btn btn-primary">–ï—â–µ –æ–¥–∏–Ω –∞–Ω–µ–∫–¥–æ—Ç</button>
                <button onclick="closeRandomJoke()" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="{% static 'jokes/js/main.js' %}"></script>
</body>
</html>