
{% extends 'jokes/base.html' %}

{% block content %}
<div style="text-align: center; margin-bottom: 2rem;">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ê–Ω–µ–∫–¥–æ—Ç—ã.ru!</h1>
    <p>–õ—É—á—à–∏–µ —à—É—Ç–∫–∏ –∏ –∞–Ω–µ–∫–¥–æ—Ç—ã –Ω–∞ –ª—é–±–æ–π –≤–∫—É—Å</p>
</div>

{% if joke_of_day %}
<div class="joke-card" style="border: 2px solid #667eea;">
    <h2 style="color: #667eea; margin-bottom: 1rem;">üé≠ –ê–Ω–µ–∫–¥–æ—Ç –¥–Ω—è</h2>
    <div class="joke-content">{{ joke_of_day.content|linebreaks }}</div>
    <div class="joke-actions">
        {% csrf_token %}
        <div class="rating">
            <button onclick="rateJoke({{ joke_of_day.id }}, 'up')" class="up">üëç</button>
            <span id="rating-{{ joke_of_day.id }}">{{ joke_of_day.rating }}</span>
            <button onclick="rateJoke({{ joke_of_day.id }}, 'down')" class="down">üëé</button>
        </div>
        <a href="{% url 'jokes:detail' joke_of_day.id %}" class="btn btn-primary">–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</a>
    </div>
</div>
{% endif %}

<h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–Ω–µ–∫–¥–æ—Ç—ã</h2>

{% if latest_jokes %}
    {% for joke in latest_jokes %}
    <div class="joke-card">
        <div class="joke-meta">
            <span class="category-tag">{{ joke.get_category_display }}</span>
            <span>{{ joke.created_at|date:"d.m.Y H:i" }} | –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ joke.views }}</span>
        </div>
        
        {% if joke.title %}
            <h3>{{ joke.title }}</h3>
        {% endif %}
        
        <div class="joke-content">{{ joke.get_short_content|linebreaks }}</div>
        
        <div class="joke-actions">
            {% csrf_token %}
            <div class="rating">
                <button onclick="rateJoke({{ joke.id }}, 'up')" class="up">üëç</button>
                <span id="rating-{{ joke.id }}">{{ joke.rating }}</span>
                <button onclick="rateJoke({{ joke.id }}, 'down')" class="down">üëé</button>
            </div>
            <a href="{% url 'jokes:detail' joke.id %}" class="btn btn-primary">–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</a>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="joke-card">
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –∞–Ω–µ–∫–¥–æ—Ç–æ–≤. <a href="/admin/">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π!</a></p>
    </div>
{% endif %}

<div style="text-align: center; margin-top: 2rem;">
    <a href="{% url 'jokes:list' %}" class="btn btn-primary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∞–Ω–µ–∫–¥–æ—Ç—ã</a>
</div>
{% endblock %}
